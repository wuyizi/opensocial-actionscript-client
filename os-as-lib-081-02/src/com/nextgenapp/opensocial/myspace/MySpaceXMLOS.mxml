<?xml version="1.0" encoding="utf-8"?>
<!-- MySpaceXMLOS maps Actionscript requests to Javascript Requests -->
<mx:XMLListCollection xmlns:mx="http://www.adobe.com/2006/mxml" >
		<!-- Setting up static functions here -->
		<mx:XML id="init">
		<script>
        <![CDATA[
            function(){
                //Create a name space for our global function
                //if it doesn't already exists
                try {
                    NextGenApp;
                } catch(e) {
                    NextGenApp = new Object(); 
                }

				//TODO: checks to see if the variable exists before defining it
				
                NextGenApp.fillPeopleRequestFields = function (parameter) {
                    	var params = new Array();
                    	for (i in parameter){
                    		switch(parameter[i]){
                    		case 'ABOUT_ME':
                    			params[i] = opensocial.Person.Field.ABOUT_ME;
                    			break;
                    		case 'ACTIVITIES':
                    			params[i] = opensocial.Person.Field.ACTIVITIES;
                    			break;
                    		case 'ADDRESSES':
                    			params[i] = opensocial.Person.Field.ADDRESSES;
                    			break;
                    		case 'AGE':
                    			params[i] = opensocial.Person.Field.AGE;
                    			break;
                    		case 'BODY_TYPE':
                    			params[i] = opensocial.Person.Field.BODY_TYPE;
                    			break;
                    		case 'BOOKS':
                    			params[i] = opensocial.Person.Field.BOOKS;
                    			break;
                    		case 'CARS':
                    			params[i] = opensocial.Person.Field.CARS;
                    			break;
                    		case 'CHILDREN':
                    			params[i] = opensocial.Person.Field.CHILDREN;
                    			break;
                    		case 'CURRENT_LOCATION':
                    			params[i] = opensocial.Person.Field.CURRENT_LOCATION;
                    			break;
                    		case 'DATE_OF_BIRTH':
                    			params[i] = opensocial.Person.Field.DATE_OF_BIRTH;
                    			break;
                    		case 'DRINKER':
                    			params[i] = opensocial.Person.Field.DRINKER;
                    			break;
                    		case 'EMAILS':
                    			params[i] = opensocial.Person.Field.EMAILS;
                    			break;
                    		case 'ETHNICITY':
                    			params[i] = opensocial.Person.Field.ETHNICITY;
                    			break;
                    		case 'FASHION':
                    			params[i] = opensocial.Person.Field.FASHION;
                    			break;
                    		case 'FOOD':
                    			params[i] = opensocial.Person.Field.FOOD;
                    			break;
                    		case 'GENDER':
                    			params[i] = opensocial.Person.Field.GENDER;
                    			break;
                    		case 'HAPPIEST_WHEN':
                    			params[i] = opensocial.Person.Field.HAPPIEST_WHEN;
                    			break;
                    		case 'HAS_APP':
                    			params[i] = opensocial.Person.Field.HAS_APP;
                    			break;
                    		case 'HEROES':
                    			params[i] = opensocial.Person.Field.HEROES;
                    			break;
                    		case 'HUMOR':
                    			params[i] = opensocial.Person.Field.HUMOR;
                    			break;
                    		case 'ID':
                    			params[i] = opensocial.Person.Field.ID;
                    			break;
                    		case 'INTERESTS':
                    			params[i] = opensocial.Person.Field.INTERESTS;
                    			break;
                    		case 'JOB_INTERESTS':
                    			params[i] = opensocial.Person.Field.JOB_INTERESTS;
                    			break;
                    		case 'JOBS':
                    			params[i] = opensocial.Person.Field.JOBS;
                    			break;
                    		case 'LANGUAGES_SPOKEN':
                    			params[i] = opensocial.Person.Field.LANGUAGES_SPOKEN;
                    			break;
                    		case 'LIVING_ARRANGEMENT':
                    			params[i] = opensocial.Person.Field.LIVING_ARRANGEMENT;
                    			break;
                    		case 'LOOKING_FOR':
                    			params[i] = opensocial.Person.Field.LOOKING_FOR;
                    			break;
                    		case 'MOVIES':
                    			params[i] = opensocial.Person.Field.MOVIES;
                    			break;
                    		case 'MUSIC':
                    			params[i] = opensocial.Person.Field.MUSIC;
                    			break;
                    		case 'NAME':
                    			params[i] = opensocial.Person.Field.NAME;
                    			break;
                    		case 'NETWORK_PRESENCE':
                    			params[i] = opensocial.Person.Field.NETWORK_PRESENCE;
                    			break;
                    		case 'NICKNAME':
                    			params[i] = opensocial.Person.Field.NICKNAME;
                    			break;
                    		case 'PETS':
                    			params[i] = opensocial.Person.Field.PETS;
                    			break;
                    		case 'PHONE_NUMBERS':
                    			params[i] = opensocial.Person.Field.PHONE_NUMBERS;
                    			break;
                    		case 'POLITICAL_VIEWS':
                    			params[i] = opensocial.Person.Field.POLITICAL_VIEWS;
                    			break;
                    		case 'PROFILE_SONG':
                    			params[i] = opensocial.Person.Field.PROFILE_SONG;
                    			break;
                    		case 'PROFILE_URL':
                    			params[i] = opensocial.Person.Field.PROFILE_URL;
                    			break;
                    		case 'PROFILE_VIDEO':
                    			params[i] = opensocial.Person.Field.PROFILE_VIDEO;
                    			break;
                    		case 'QUOTES':
                    			params[i] = opensocial.Person.Field.QUOTES;
                    			break;
                    		case 'RELATIONSHIP_STATUS':
                    			params[i] = opensocial.Person.Field.RELATIONSHIP_STATUS;
                    			break;
                    		case 'RELIGION':
                    			params[i] = opensocial.Person.Field.RELIGION;
                    			break;
                    		case 'ROMANCE':
                    			params[i] = opensocial.Person.Field.ROMANCE;
                    			break;
                    		case 'SCARED_OF':
                    			params[i] = opensocial.Person.Field.SCARED_OF;
                    			break;
                    		case 'SCHOOLS':
                    			params[i] = opensocial.Person.Field.SCHOOLS;
                    			break;
                    		case 'SEXUAL_ORIENTATION':
                    			params[i] = opensocial.Person.Field.SEXUAL_ORIENTATION;
                    			break;
                    		case 'SMOKER':
                    			params[i] = opensocial.Person.Field.SMOKER;
                    			break;
                    		case 'SPORTS':
                    			params[i] = opensocial.Person.Field.SPORTS;
                    			break;
                    		case 'STATUS':
                    			params[i] = opensocial.Person.Field.STATUS;
                    			break;
                    		case 'TAGS':
                    			params[i] = opensocial.Person.Field.TAGS;
                    			break;
                    		case 'THUMBNAIL_URL':
                    			params[i] = opensocial.Person.Field.THUMBNAIL_URL;
                    			break;
                    		case 'TIME_ZONE':
                    			params[i] = opensocial.Person.Field.TIME_ZONE;
                    			break;
                    		case 'TURN_OFFS':
                    			params[i] = opensocial.Person.Field.TURN_OFFS;
                    			break;
                    		case 'TURN_ONS':
                    			params[i] = opensocial.Person.Field.TURN_ONS;
                    			break;
                    		case 'TV_SHOWS':
                    			params[i] = opensocial.Person.Field.TV_SHOWS;
                    			break;
                    		case 'URLS':
                    			params[i] = opensocial.Person.Field.URLS;
                    			break;
                    		//START of MySpace specific properties
                    		case 'AGE':
                    			params[i] = MyOpenSpace.Person.Field.AGE;
                    			break;
                    		case 'BOOKS':
                    			params[i] = MyOpenSpace.Person.Field.BOOKS;
                    			break;
                    		case 'ABOUT':
                    			params[i] = MyOpenSpace.Person.Field.ABOUT;
                    			break;
                    		case 'GENDER':
                    			params[i] = MyOpenSpace.Person.Field.GENDER;
                    			break;
                    		case 'LARGE_IMAGE_URI':
                    			params[i] = MyOpenSpace.Person.Field.LARGE_IMAGE_URI;
                    			break;
                    		case 'LAST_UPDATED_DATE':
                    			params[i] = MyOpenSpace.Person.Field.LAST_UPDATED_DATE;
                    			break;
                    		case 'CITY':
                    			params[i] = MyOpenSpace.Person.Field.CITY;
                    			break;
                    		case 'REGION':
                    			params[i] = MyOpenSpace.Person.Field.REGION;
                    			break;
                    		case 'POSTALCODE':
                    			params[i] = MyOpenSpace.Person.Field.POSTALCODE;
                    			break;
                    		case 'COUNTRY':
                    			params[i] = MyOpenSpace.Person.Field.COUNTRY;
                    			break;
                    		case 'HOMETOWN':
                    			params[i] = MyOpenSpace.Person.Field.HOMETOWN;
                    			break;
                    		case 'CULTURE':
                    			params[i] = MyOpenSpace.Person.Field.CULTURE;
                    			break;
                    		case 'MARITAL_STATUS':
                    			params[i] = MyOpenSpace.Person.Field.MARITAL_STATUS;
                    			break;
                    		case 'INTERESTS':
                    			params[i] = MyOpenSpace.Person.Field.INTERESTS;
                    			break;
                    		case 'MUSIC':
                    			params[i] = MyOpenSpace.Person.Field.MUSIC;
                    			break;
                    		case 'MOVIES':
                    			params[i] = MyOpenSpace.Person.Field.MOVIES;
                    			break;
                    		case 'TELEVISION':
                    			params[i] = MyOpenSpace.Person.Field.TELEVISION;
                    			break;
                    		case 'HEADLINE':
                    			params[i] = MyOpenSpace.Person.Field.HEADLINE;
                    			break;
                    		case 'OCCUPATION':
                    			params[i] = MyOpenSpace.Person.Field.OCCUPATION;
                    			break;
                    		case 'ZODIAC_SIGN':
                    			params[i] = MyOpenSpace.Person.Field.ZODIAC_SIGN;
                    			break;
                    		case 'MOOD':
                    			params[i] = MyOpenSpace.Person.Field.MOOD;
                    			break;
                    		case 'MOOD_LAST_UPDATED':
                    			params[i] = MyOpenSpace.Person.Field.MOOD_LAST_UPDATED;
                    			break;
                    		case 'DESIRE_TO_MEET':
                    			params[i] = MyOpenSpace.Person.Field.DESIRE_TO_MEET;
                    			break;
                    		case 'ONLINE_NOW':
                    			params[i] = MyOpenSpace.Person.Field.ONLINE_NOW;
                    			break;
                    		default:
                    			params[i] = "";
                    		}
                    	}//for
                    	return params;
                    }//getOSParams
            }
        ]]>
	    </script>
		</mx:XML>

		<!-- Start of OPENSOCIAL CALLS here -->
	   	<mx:XML id="fetchPersonRequest" xmlns="http://www.nextgenapp.com/opensocial/flex/api" >  
   		<script>
		<![CDATA[
			function(objParam)
			{	
				function fetchPerson(oParam){  	
					var os = opensocial.Container.get(); // different from standard

	  				var dataRequest = os.newDataRequest();
	  				var param = {};
	  				//lets fill out the params
	  				if ( oParam.params != undefined ){
		  				for (var i in oParam.params){
		  					switch (i){
		  					case 'PROFILE_DETAILS':
		  						param[opensocial.DataRequest.PeopleRequestFields.PROFILE_DETAILS] = NextGenApp.fillPeopleRequestFields(oParam.params[i]);
		  						//use this as cache for the response
		  						oParam.osParam = param[opensocial.DataRequest.PeopleRequestFields.PROFILE_DETAILS];
		  					break;
		  					default:
		  						//not supported. throw an exception
		  						var mesg = "Error. DataRequest.PeopleRequestFields = " + i + " is not supported.";
		  						throw mesg;
		  					}//switch
		  				}//for
	  				}
					
					var OWNERReq = os.newFetchPersonRequest(oParam.view, param);
					dataRequest.add(OWNERReq); // different from standard
					dataRequest.send(getResponse);

					function getResponse(response)
					{
						var flashobj = document.getElementById(oParam.name);
						var OWNER = response.get(oParam.view).getData();
						var returnData = {};
						returnData.data = {};
						//tells whether viewer or owner
						returnData.isViewer = OWNER.isViewer();
						returnData.isOwner = OWNER.isOwner();
						//returnData.errMesg = response.getErrorMessage();
						//returnData.hadError = response.hadError();
						//returnData.owner = {};
						//returnData.owner.name = OWNER.getField(opensocial.Person.Field.NAME);
						//returnData.owner.age = OWNER.getField(opensocial.Person.Field.AGE);
						//returnData.owner.myArray = ['AGE', 'NAME', 'FIELD'];
						//returnData.owner.osParam = oParam.osParam;
						for (var i in oParam.params){
		  					switch (i){
		  					case 'PROFILE_DETAILS':
		  						//get the array of the profile details
		  						var profDet = oParam.params[i];
		  						for (var j in profDet){
		  							returnData.data[profDet[j]] = OWNER.getField(oParam.osParam[j]);
		  						}
		  					break;
		  					default:
		  						//not supported. throw an exception
		  						var mesg = "Error. DataRequest.PeopleRequestFields = " + i + " is not supported.";
		  						throw mesg;
		  					}//switch
		  				}//for
		  				
					  	flashobj.fetchPersonRequestCallback(returnData);
				  	}//getResponse
				  	
			  	}//fetchPerson
			  	
			  	fetchPerson(objParam);
			  }
		]]>
		</script>
   	</mx:XML> 
</mx:XMLListCollection>
